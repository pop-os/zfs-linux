Description: Don't fail if zfs modules can't load on package installation
  Ideally, modprobe should be attempted but not fatal (LP: #1880421)
Author: Colin Ian King <colin.king@canonical.com>
Origin: ubuntu
Forwarded: no
Last-Update: 2020-06-04

--- a/etc/systemd/system/zfs-load-module.service.in
+++ b/etc/systemd/system/zfs-load-module.service.in
@@ -10,7 +10,7 @@
 [Service]
 Type=oneshot
 RemainAfterExit=yes
-ExecStart=/usr/sbin/modprobe zfs
+ExecStart=-/usr/sbin/modprobe zfs
 
 [Install]
 WantedBy=zfs-mount.service
--- a/etc/systemd/system/zfs-share.service.in
+++ b/etc/systemd/system/zfs-share.service.in
@@ -14,7 +14,7 @@
 Type=oneshot
 RemainAfterExit=yes
 EnvironmentFile=-@initconfdir@/zfs
-ExecStart=zfs share -a
+ExecStart=-zfs share -a
 
 [Install]
 WantedBy=zfs.target
